# ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è¯´æ˜

## âš ï¸ å…³äº Flask å¼€å‘æœåŠ¡å™¨è­¦å‘Š

å¦‚æœæ‚¨çœ‹åˆ°è¿™ä¸ªè­¦å‘Šï¼š
```
WARNING: This is a development server. Do not use it in a production deployment. 
Use a production WSGI server instead.
```

**å«ä¹‰**ï¼šFlask è‡ªå¸¦çš„æœåŠ¡å™¨ä»…ç”¨äºå¼€å‘æµ‹è¯•ï¼Œä¸é€‚åˆç”Ÿäº§ç¯å¢ƒã€‚

## âœ… è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Gunicorn

### ä»€ä¹ˆæ˜¯ Gunicornï¼Ÿ
- **ç”Ÿäº§çº§ WSGI æœåŠ¡å™¨**
- é«˜æ€§èƒ½ã€ç¨³å®šã€æ”¯æŒå¹¶å‘
- é€‚åˆéƒ¨ç½² Flask åº”ç”¨

### å·²é…ç½®å®Œæˆ
æœ¬é¡¹ç›®å·²ç»é…ç½®å¥½ Gunicornï¼Œæ‚¨åªéœ€ï¼š

#### 1. æœ¬åœ°æµ‹è¯• Gunicorn
```bash
# å®‰è£…ä¾èµ–ï¼ˆå·²åŒ…å« gunicornï¼‰
pip install -r requirements-compatible.txt

# ä½¿ç”¨ Gunicorn å¯åŠ¨
gunicorn --bind 0.0.0.0:5001 app:app

# æˆ–æŒ‡å®šå¤šä¸ªå·¥ä½œè¿›ç¨‹
gunicorn --bind 0.0.0.0:5001 --workers 4 app:app
```

#### 2. Render éƒ¨ç½²ï¼ˆè‡ªåŠ¨ä½¿ç”¨ï¼‰
Render ä¼šè‡ªåŠ¨ä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„å¯åŠ¨å‘½ä»¤ï¼š
```bash
gunicorn --bind 0.0.0.0:$PORT app:app
```

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| ç‰¹æ€§ | Flask å¼€å‘æœåŠ¡å™¨ | Gunicorn |
|------|-----------------|----------|
| æ€§èƒ½ | âŒ æ…¢ | âœ… å¿« |
| å¹¶å‘å¤„ç† | âŒ å•çº¿ç¨‹ | âœ… å¤šè¿›ç¨‹ |
| ç¨³å®šæ€§ | âŒ ä¸ç¨³å®š | âœ… ç”Ÿäº§çº§ |
| é€‚ç”¨åœºæ™¯ | æœ¬åœ°å¼€å‘ | ç”Ÿäº§éƒ¨ç½² |

## ğŸ”§ Gunicorn å¸¸ç”¨å‚æ•°

```bash
# åŸºç¡€å¯åŠ¨
gunicorn app:app

# æŒ‡å®šç«¯å£
gunicorn --bind 0.0.0.0:8000 app:app

# æŒ‡å®šå·¥ä½œè¿›ç¨‹æ•°ï¼ˆæ¨èï¼šCPUæ ¸å¿ƒæ•° * 2 + 1ï¼‰
gunicorn --bind 0.0.0.0:8000 --workers 4 app:app

# æŒ‡å®šè¶…æ—¶æ—¶é—´ï¼ˆå¤„ç†å¤§æ–‡ä»¶æ—¶å¾ˆé‡è¦ï¼‰
gunicorn --bind 0.0.0.0:8000 --timeout 120 app:app

# å®Œæ•´æ¨èé…ç½®
gunicorn --bind 0.0.0.0:8000 \
         --workers 4 \
         --timeout 120 \
         --access-logfile - \
         --error-logfile - \
         app:app
```

## ğŸ“ ä¸‰ç§å¯åŠ¨æ–¹å¼å¯¹æ¯”

### 1. å¼€å‘æ¨¡å¼ï¼ˆæœ¬åœ°æµ‹è¯•ï¼‰
```bash
python app.py
```
- âš ï¸ ä¼šæ˜¾ç¤ºè­¦å‘Š
- âœ… æ”¯æŒçƒ­é‡è½½ï¼ˆä¿®æ”¹ä»£ç è‡ªåŠ¨é‡å¯ï¼‰
- âœ… è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- é€‚åˆï¼šæœ¬åœ°å¼€å‘è°ƒè¯•

### 2. Gunicorn æœ¬åœ°æµ‹è¯•
```bash
gunicorn --bind 0.0.0.0:5001 app:app
```
- âœ… æ— è­¦å‘Š
- âŒ ä¸æ”¯æŒçƒ­é‡è½½
- âœ… ç”Ÿäº§ç¯å¢ƒæ¨¡æ‹Ÿ
- é€‚åˆï¼šéƒ¨ç½²å‰æµ‹è¯•

### 3. Render ç”Ÿäº§ç¯å¢ƒ
```bash
gunicorn --bind 0.0.0.0:$PORT app:app
```
- âœ… è‡ªåŠ¨é…ç½®
- âœ… ç”Ÿäº§çº§æ€§èƒ½
- âœ… è‡ªåŠ¨é‡å¯
- é€‚åˆï¼šæ­£å¼éƒ¨ç½²

## ğŸ¯ ä½¿ç”¨å»ºè®®

| åœºæ™¯ | æ¨èæ–¹å¼ | å¯åŠ¨å‘½ä»¤ |
|------|---------|---------|
| æœ¬åœ°å¼€å‘ | Flask å¼€å‘æœåŠ¡å™¨ | `python app.py` |
| éƒ¨ç½²å‰æµ‹è¯• | Gunicorn | `gunicorn app:app` |
| Render éƒ¨ç½² | Gunicornï¼ˆè‡ªåŠ¨ï¼‰ | è‡ªåŠ¨ä½¿ç”¨é…ç½® |
| å…¶ä»–äº‘å¹³å° | Gunicorn | è§é…ç½®æ–‡ä»¶ |

## âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. åˆç†è®¾ç½®å·¥ä½œè¿›ç¨‹æ•°
```python
# æ¨èå…¬å¼
workers = (CPUæ ¸å¿ƒæ•° * 2) + 1

# ä¾‹å¦‚ï¼š2æ ¸CPU
workers = (2 * 2) + 1 = 5
```

### 2. å¢åŠ è¶…æ—¶æ—¶é—´ï¼ˆå¤„ç†å¤§PDFï¼‰
```bash
gunicorn --timeout 300 app:app  # 5åˆ†é’Ÿè¶…æ—¶
```

### 3. å¯ç”¨æ—¥å¿—è®°å½•
```bash
gunicorn --access-logfile access.log \
         --error-logfile error.log \
         app:app
```

## ğŸš€ å¿«é€Ÿæ£€æŸ¥æ¸…å•

åœ¨éƒ¨ç½²å‰ï¼Œç¡®è®¤ï¼š

- âœ… `requirements-compatible.txt` åŒ…å« `gunicorn`
- âœ… `render.yaml` ä½¿ç”¨ gunicorn å¯åŠ¨å‘½ä»¤
- âœ… æœ¬åœ°æµ‹è¯•è¿‡ gunicorn å¯åŠ¨
- âœ… ç¡®è®¤åº”ç”¨å¯ä»¥æ­£å¸¸å¤„ç†è¯·æ±‚
- âœ… æµ‹è¯•æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½

## ğŸ“– ç›¸å…³æ–‡æ¡£

- **Gunicorn å®˜æ–¹æ–‡æ¡£**ï¼šhttps://docs.gunicorn.org
- **Flask éƒ¨ç½²æŒ‡å—**ï¼šhttps://flask.palletsprojects.com/en/latest/deploying/
- **Render Python éƒ¨ç½²**ï¼šhttps://render.com/docs/deploy-flask

---

**æ€»ç»“**ï¼šé‚£ä¸ªè­¦å‘Šæ˜¯æ­£å¸¸çš„æé†’ï¼Œåªè¦åœ¨ Render ä¸Šä½¿ç”¨ Gunicorn å°±å®Œå…¨æ²¡é—®é¢˜ï¼

**æœ€åæ›´æ–°**ï¼š2025å¹´10æœˆ

