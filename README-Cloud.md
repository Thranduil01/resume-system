# ☁️ 云端部署版本说明

## 🎯 本地部署 vs 云端部署

| 功能 | 本地部署 | 云端部署（Railway） |
|------|---------|-------------------|
| **访问方式** | 只能自己使用 | 任何人通过 URL 访问 |
| **文件输入** | 📁 本地路径 + ☁️ 文件上传 | ☁️ 仅文件上传 |
| **OCR 支持** | ✅ 完整支持 | ⚠️ 需要 Docker 或 Grok API |
| **数据存储** | ✅ 永久保存 | ✅ 数据库持久化 |
| **成本** | 免费 | 免费额度（$5/月） |
| **部署难度** | ⭐ 简单 | ⭐⭐⭐ 中等 |

---

## 🔍 为什么云端无法读取本地路径？

这是云服务的**根本限制**，不是系统问题：

```
用户电脑（本地）      ❌ 无法直接访问
    ↓
互联网              
    ↓
云服务器（Railway）   ✅ 可以接收上传的文件
```

**技术原因**：
1. **安全性**：服务器不能访问用户的本地文件系统
2. **物理隔离**：你的电脑和云服务器是完全独立的机器
3. **网络限制**：文件路径只在本地有效

**解决方案**：
- 使用 **文件上传功能**
- 系统会自动处理上传的文件
- 处理完成后自动删除临时文件

---

## 🚀 双模式系统

我们的系统支持两种模式：

### 📁 本地路径模式
**适用场景**：
- 本地部署（自己使用）
- 文件在本地电脑上
- 需要批量处理大量文件

**使用方法**：
1. 双击启动脚本
2. 选择 "📁 本地路径" 模式
3. 输入文件夹路径
4. 点击 "开始解析"

---

### ☁️ 文件上传模式
**适用场景**：
- 云端部署（给别人用）
- 需要分享给团队
- 远程访问

**使用方法**：
1. 访问部署的 URL
2. 选择 "☁️ 文件上传" 模式
3. 拖拽或选择 PDF 文件
4. 点击 "开始解析上传的文件"

**特点**：
- ✅ 支持批量上传（多个文件）
- ✅ 拖拽上传（方便快捷）
- ✅ 自动清理临时文件
- ✅ 安全可靠

---

## 💡 推荐使用场景

### 场景1：个人使用
**推荐**：本地部署 + 本地路径模式
- 最快速
- 无需上传
- 完整功能

### 场景2：团队协作
**推荐**：Railway 部署 + 文件上传模式
- 任何人都可访问
- 无需安装
- 统一管理

### 场景3：远程使用
**推荐**：Railway 部署 + Grok API
- 随时随地访问
- AI 智能识别
- 无需 OCR

---

## 🔧 技术实现

### 后端改动
```python
# 新增文件上传端点
@app.route('/api/upload', methods=['POST'])
def upload_files():
    # 1. 接收上传的文件
    # 2. 保存到临时文件夹 (uploads/)
    # 3. 解析 PDF
    # 4. 存入数据库
    # 5. 删除临时文件
    return result
```

### 前端改动
```html
<!-- 模式切换 -->
<div class="mode-switcher">
    <button onclick="switchMode('local')">📁 本地路径</button>
    <button onclick="switchMode('upload')">☁️ 文件上传</button>
</div>

<!-- 文件上传区域 -->
<div class="upload-area">
    <input type="file" multiple accept=".pdf">
    <!-- 支持拖拽上传 -->
</div>
```

---

## 📁 文件结构

```
1030 intern_email_address/
├── uploads/                 ← 临时上传文件夹（自动清理）
├── app.py                   ← 新增上传端点
├── templates/
│   └── index.html          ← 新增双模式界面
├── Procfile                 ← Railway 配置
├── Railway部署指南.md       ← 部署教程
└── .gitignore              ← 忽略 uploads/ 和 *.pdf
```

---

## ⚠️ 注意事项

### 1. 文件大小限制
- 单个文件：最大 50 MB
- 总上传大小：根据 Railway 内存限制

### 2. 临时文件清理
- 解析完成后自动删除
- 应用重启后全部清空

### 3. OCR 在云端的限制
- Tesseract OCR 需要系统依赖
- 推荐使用 Grok API（更强大）
- 或使用 Docker 部署（支持完整 OCR）

### 4. 数据持久化
- ✅ 数据库（`resumes.db`）持久化
- ❌ 上传文件（`uploads/`）临时存储

---

## 🎯 快速对比

| 需求 | 选择 |
|------|------|
| 我自己用，文件在本地 | 本地部署 + 本地路径 |
| 给团队用，需要在线访问 | Railway + 文件上传 |
| 需要 OCR 功能 | 本地部署或 Docker |
| 需要 AI 识别 | Railway + Grok API |
| 想要最简单 | 本地部署 |
| 想要最强大 | Railway + Docker + Grok |

---

## 🚀 下一步

### 本地使用
1. 双击 `启动系统.command`（macOS）
2. 或双击 `start.bat`（Windows）
3. 选择 "📁 本地路径" 模式

### 云端部署
1. 查看 `Railway部署指南.md`
2. 按步骤部署到 Railway
3. 分享 URL 给团队成员

---

**总结**：两种模式各有优势，根据实际需求选择。本地部署更快更简单，云端部署更方便分享。🎉

