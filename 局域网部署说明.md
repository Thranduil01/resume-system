# 🌐 局域网部署指南

## 🎯 适用场景

- ✅ 公司/学校内部使用
- ✅ 团队协作，多人同时使用
- ✅ 不需要每个人都安装软件
- ✅ 连接同一个 WiFi 即可

---

## 🚀 快速开始

### 第1步：启动服务（管理员操作）

**macOS**:
```bash
双击 "局域网启动.command"
```

**Windows**:
```batch
双击 "局域网启动.bat"
```

### 第2步：记下访问地址

启动后会显示：
```
🌐 局域网访问地址（分享给同事）：
   http://192.168.1.100:5001
```

### 第3步：分享给同事

把这个地址发给同事，他们打开浏览器访问即可！

---

## 📋 系统要求

### 管理员（部署者）
- ✅ Python 3.8+（推荐 3.12）
- ✅ 连接到公司/学校 WiFi
- ✅ 电脑必须保持开机状态

### 同事（使用者）
- ✅ 连接**同一个** WiFi
- ✅ 有浏览器即可（Chrome、Safari、Edge等）
- ❌ **不需要**安装 Python
- ❌ **不需要**安装任何软件

---

## 🔍 获取局域网 IP（手动查看）

### macOS
1. **系统偏好设置** → **网络**
2. 选择当前连接的网络（Wi-Fi 或以太网）
3. 查看 **IP 地址**（如：192.168.1.100）

或者在终端运行：
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
```

### Windows
1. **控制面板** → **网络和 Internet** → **网络连接**
2. 右键当前连接 → **状态** → **详细信息**
3. 查看 **IPv4 地址**（如：192.168.1.100）

或者在命令提示符运行：
```batch
ipconfig
```

### Linux
```bash
ifconfig
# 或
ip addr show
```

---

## 📱 同事如何使用

### 第1步：连接同一WiFi
确保和部署者连接**同一个** WiFi 网络。

### 第2步：打开浏览器
任何浏览器都可以（Chrome、Safari、Firefox、Edge等）

### 第3步：访问地址
输入管理员提供的地址：
```
http://192.168.1.100:5001
```

### 第4步：开始使用
- 输入简历文件夹路径（**本地路径**，在服务器电脑上）
- 或使用 "☁️ 文件上传" 模式

---

## ⚙️ 配置说明

### 默认配置
- **端口**：5001
- **主机**：0.0.0.0（允许外部访问）
- **调试模式**：开启（生产环境建议关闭）

### 修改端口（如果 5001 被占用）

编辑 `app.py` 最后几行：
```python
if __name__ == '__main__':
    import os
    port = int(os.environ.get('PORT', 5002))  # 改为 5002 或其他端口
    # ...
```

然后访问时使用新端口：`http://192.168.1.100:5002`

---

## 🔒 安全建议

### 基础安全
1. **只在信任的网络使用**（公司内网）
2. **不要暴露到公网**（仅局域网）
3. **处理完毕后关闭服务**

### 高级安全（可选）

#### 添加密码保护

1. 安装依赖：
```bash
pip install Flask-HTTPAuth
```

2. 修改 `app.py`，在文件开头添加：
```python
from flask_httpauth import HTTPBasicAuth
auth = HTTPBasicAuth()

users = {
    "admin": "your_password"  # 设置用户名和密码
}

@auth.verify_password
def verify_password(username, password):
    if username in users and users[username] == password:
        return username
```

3. 在路由添加 `@auth.login_required`：
```python
@app.route('/')
@auth.login_required  # 添加这行
def index():
    return render_template('index.html')
```

---

## ⚠️ 常见问题

### Q1: 同事无法访问？

**可能原因**：
1. **不在同一个 WiFi** 
   - 检查：都连接到相同的 WiFi 网络
   
2. **防火墙阻止**
   - macOS: 系统偏好设置 → 安全性与隐私 → 防火墙 → 防火墙选项 → 允许 Python
   - Windows: 控制面板 → Windows 防火墙 → 允许应用 → 添加 Python

3. **IP 地址变化了**
   - 重启路由器或电脑后 IP 可能改变
   - 重新查看并分享新的 IP

4. **端口被占用**
   - 修改为其他端口（如 5002）

### Q2: IP 地址经常变化？

**解决方案**：设置静态 IP

**macOS**:
1. 系统偏好设置 → 网络
2. 选择网络 → 高级 → TCP/IP
3. 配置 IPv4：**使用 DHCP，手动设置地址**
4. 设置一个固定 IP（如：192.168.1.100）

**Windows**:
1. 控制面板 → 网络连接
2. 右键网络 → 属性 → IPv4 → 属性
3. 选择：**使用下面的 IP 地址**
4. 输入固定 IP、子网掩码、网关

---

### Q3: 性能问题（多人同时使用）？

**优化方案**：

使用生产服务器（Gunicorn）：

1. 安装：
```bash
pip install gunicorn
```

2. 启动：
```bash
gunicorn -w 4 -b 0.0.0.0:5001 app:app
```

参数说明：
- `-w 4`：4个工作进程（根据CPU核心数调整）
- `-b 0.0.0.0:5001`：监听地址和端口

---

### Q4: 如何停止服务？

**方法1**：关闭终端窗口

**方法2**：在终端按 `Ctrl + C`

---

## 📊 使用场景对比

| 场景 | 本地部署 | 局域网部署 | 云端部署 |
|------|---------|-----------|---------|
| **访问范围** | 只自己 | 同WiFi | 全球 |
| **安装要求** | 需要Python | 管理员需要 | 不需要 |
| **使用人数** | 1人 | 多人 | 多人 |
| **数据安全** | ✅ 最安全 | ✅ 局域网 | ⚠️ 云端 |
| **稳定性** | 高 | 中（依赖电脑） | 高 |
| **成本** | 免费 | 免费 | 付费/免费 |

---

## 💡 最佳实践

### 团队使用建议

1. **指定一台专用电脑**
   - 性能好的台式机
   - 长期开机
   - 稳定的网络连接

2. **设置固定 IP**
   - 避免 IP 地址变化
   - 方便同事记忆

3. **添加密码保护**
   - 防止未授权访问
   - 保护数据安全

4. **定期备份数据库**
   - 复制 `resumes.db` 文件
   - 防止数据丢失

5. **明确使用规范**
   - 只处理公司业务
   - 不处理敏感信息
   - 定期清理数据

---

## 🔧 故障排除

### 检查清单

- [ ] Python 已安装（3.8+）
- [ ] 依赖已安装（Flask、pdfplumber等）
- [ ] 防火墙允许 Python
- [ ] 连接同一个 WiFi
- [ ] IP 地址正确
- [ ] 端口未被占用（5001）
- [ ] 服务已启动（终端窗口显示运行中）

### 测试方法

1. **本机测试**：
   - 访问 `http://localhost:5001`
   - 确保本机能正常使用

2. **局域网测试**：
   - 用手机连接同一WiFi
   - 访问 `http://你的IP:5001`
   - 确保局域网可访问

3. **多人测试**：
   - 让同事尝试访问
   - 确认多人同时使用正常

---

## 📞 获取帮助

### 查看日志
终端窗口会显示所有访问日志：
```
127.0.0.1 - - [30/Oct/2024 10:00:00] "GET / HTTP/1.1" 200 -
192.168.1.50 - - [30/Oct/2024 10:00:05] "POST /api/parse HTTP/1.1" 200 -
```

### 常用诊断命令

**查看端口占用**：
```bash
# macOS/Linux
lsof -i :5001

# Windows
netstat -ano | findstr :5001
```

**测试连接**：
```bash
# 从其他电脑测试
curl http://192.168.1.100:5001
```

---

## 🎉 开始使用

**启动服务**：
```
双击 "局域网启动.command" (macOS)
或
双击 "局域网启动.bat" (Windows)
```

**分享地址**：
```
http://你的IP:5001
```

**就这么简单！** 🚀

---

## 📝 总结

**优势**：
- ✅ 无需每人安装
- ✅ 统一数据管理
- ✅ 多人协作方便
- ✅ 完全免费

**注意**：
- ⚠️ 需要管理员电脑一直开机
- ⚠️ 只能在同一WiFi下使用
- ⚠️ 建议添加密码保护

**适合**：
- 公司内部批量处理简历
- 团队协作使用
- 临时项目使用



